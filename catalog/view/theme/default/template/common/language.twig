{% if languages|length > 1 %}
<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-language">
  <div class="language">
      <ul>
        {% for language in languages %}
          {% if language.code == code %} 
            <li class="lang-current">
              <a href="javascript:void(0);">{{ language.format_name }}</a>
            </li>
          {% else %}
            <li>
              <a href="#" data-code="{{ language.code }}">{{ language.format_name }}</a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
      <input type="hidden" name="code" value="" />
      <input type="hidden" name="redirect" value="{{ redirect }}" />
  </div>
</form>
<script>
  $(document).ready(function($){
    $('#form-language a').on('click', function(e){
      e.preventDefault();
      var code = $(this).attr('data-code');
      if( ! code ) return;

      $('#form-language input[name=\'code\']').val(code);

      $('#form-language').submit();
    })
  })
</script>
{% endif %}
